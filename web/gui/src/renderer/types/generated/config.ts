// Auto-generated by web/scripts/generate_types.py
// Do not edit manually. Regenerate when backend config classes change.

import type {
  AudioFormat,
  BalancingStrategy,
  CloudAction,
  CloudFileSync,
  CloudType,
  ConceptType,
  ConfigPart,
  DataType,
  EMAMode,
  GradientCheckpointingMethod,
  GradientReducePrecision,
  ImageFormat,
  LearningRateScaler,
  LearningRateScheduler,
  LossScaler,
  LossWeight,
  ModelFormat,
  ModelType,
  NoiseScheduler,
  Optimizer,
  PeftType,
  TimeUnit,
  TimestepDistribution,
  TrainingMethod,
  VideoFormat,
} from './enums';

export interface ConceptImageConfig {
  enable_crop_jitter: boolean;
  enable_random_flip: boolean;
  enable_fixed_flip: boolean;
  enable_random_rotate: boolean;
  enable_fixed_rotate: boolean;
  random_rotate_max_angle: number;
  enable_random_brightness: boolean;
  enable_fixed_brightness: boolean;
  random_brightness_max_strength: number;
  enable_random_contrast: boolean;
  enable_fixed_contrast: boolean;
  random_contrast_max_strength: number;
  enable_random_saturation: boolean;
  enable_fixed_saturation: boolean;
  random_saturation_max_strength: number;
  enable_random_hue: boolean;
  enable_fixed_hue: boolean;
  random_hue_max_strength: number;
  enable_resolution_override: boolean;
  resolution_override: string;
  enable_random_circular_mask_shrink: boolean;
  enable_random_mask_rotate_crop: boolean;
}

export interface ConceptTextConfig {
  prompt_source: string;
  prompt_path: string;
  enable_tag_shuffling: boolean;
  tag_delimiter: string;
  keep_tags_count: number;
  tag_dropout_enable: boolean;
  tag_dropout_mode: string;
  tag_dropout_probability: number;
  tag_dropout_special_tags_mode: string;
  tag_dropout_special_tags: string;
  tag_dropout_special_tags_regex: boolean;
  caps_randomize_enable: boolean;
  caps_randomize_mode: string;
  caps_randomize_probability: number;
  caps_randomize_lowercase: boolean;
}

export interface ConceptConfig {
  image: ConceptImageConfig;
  text: ConceptTextConfig;
  name: string;
  path: string;
  seed: number;
  enabled: boolean;
  type: ConceptType;
  include_subdirectories: boolean;
  image_variations: number;
  text_variations: number;
  balancing: number;
  balancing_strategy: BalancingStrategy;
  loss_weight: number;
  concept_stats: Record<string, unknown>;
}

export interface TrainModelPartConfig {
  model_name: string;
  include: boolean;
  train: boolean;
  stop_training_after: number | null;
  stop_training_after_unit: TimeUnit;
  learning_rate: number | null;
  weight_dtype: DataType;
  dropout_probability: number;
  train_embedding: boolean;
  attention_mask: boolean;
  guidance_scale: number;
}

export interface QuantizationConfig {
  layer_filter: string;
  layer_filter_preset: string;
  layer_filter_regex: boolean;
  svd_dtype: DataType;
  svd_rank: number;
  cache_dir: string | null;
}

export interface TrainEmbeddingConfig {
  uuid: string;
  model_name: string;
  placeholder: string;
  train: boolean;
  stop_training_after: number | null;
  stop_training_after_unit: TimeUnit;
  token_count: number | null;
  initial_embedding_text: string;
  is_output_embedding: boolean;
}

export interface CloudConfig {
  enabled: boolean;
  type: CloudType;
  file_sync: CloudFileSync;
  create: boolean;
  name: string;
  tensorboard_tunnel: boolean;
  sub_type: string;
  gpu_type: string;
  volume_size: number;
  min_download: number;
  remote_dir: string;
  huggingface_cache_dir: string;
  onetrainer_dir: string;
  install_cmd: string;
  install_onetrainer: boolean;
  update_onetrainer: boolean;
  detach_trainer: boolean;
  run_id: string;
  download_samples: boolean;
  download_output_model: boolean;
  download_saves: boolean;
  download_backups: boolean;
  download_tensorboard: boolean;
  delete_workspace: boolean;
  on_finish: CloudAction;
  on_error: CloudAction;
  on_detached_finish: CloudAction;
  on_detached_error: CloudAction;
}

export interface TrainOptimizerConfig {
  optimizer: Optimizer;
  adam_w_mode: boolean;
  alpha: number | null;
  amsgrad: boolean;
  beta1: number | null;
  beta2: number | null;
  beta3: number | null;
  bias_correction: boolean;
  block_wise: boolean;
  capturable: boolean;
  centered: boolean;
  clip_threshold: number | null;
  d0: number | null;
  d_coef: number | null;
  dampening: number | null;
  decay_rate: number | null;
  decouple: boolean;
  differentiable: boolean;
  eps: number | null;
  eps2: number | null;
  foreach: boolean | null;
  fsdp_in_use: boolean;
  fused: boolean;
  fused_back_pass: boolean;
  growth_rate: number | null;
  initial_accumulator_value: number | null;
  initial_accumulator: number | null;
  is_paged: boolean;
  log_every: number | null;
  lr_decay: number | null;
  max_unorm: number | null;
  maximize: boolean;
  min_8bit_size: number | null;
  quant_block_size: number | null;
  momentum: number | null;
  nesterov: boolean;
  no_prox: boolean;
  optim_bits: number | null;
  percentile_clipping: number | null;
  r: number | null;
  relative_step: boolean;
  safeguard_warmup: boolean;
  scale_parameter: boolean;
  stochastic_rounding: boolean;
  use_bias_correction: boolean;
  use_triton: boolean;
  warmup_init: boolean;
  weight_decay: number | null;
  weight_lr_power: number | null;
  decoupled_decay: boolean;
  fixed_decay: boolean;
  rectify: boolean;
  degenerated_to_sgd: boolean;
  k: number | null;
  xi: number | null;
  n_sma_threshold: number | null;
  ams_bound: boolean;
  adanorm: boolean;
  adam_debias: boolean;
  slice_p: number | null;
  cautious: boolean;
  weight_decay_by_lr: boolean;
  prodigy_steps: number | null;
  use_speed: boolean;
  split_groups: boolean;
  split_groups_mean: boolean;
  factored: boolean;
  factored_fp32: boolean;
  use_stableadamw: boolean;
  use_cautious: boolean;
  use_grams: boolean;
  use_adopt: boolean;
  d_limiter: boolean | null;
  use_schedulefree: boolean | null;
  use_orthograd: boolean;
  nnmf_factor: boolean;
  orthogonal_gradient: boolean;
  use_atan2: boolean;
  use_AdEMAMix: boolean;
  beta3_ema: number | null;
  alpha_grad: number | null;
  beta1_warmup: number | null;
  min_beta1: number | null;
  Simplified_AdEMAMix: boolean;
  cautious_mask: boolean;
  grams_moment: boolean;
  kourkoutas_beta: boolean;
  k_warmup_steps: number | null;
  schedulefree_c: number | null;
  ns_steps: number | null;
  MuonWithAuxAdam: boolean;
  muon_hidden_layers: string | null;
  muon_adam_regex: boolean;
  muon_adam_lr: number | null;
  muon_te1_adam_lr: number | null;
  muon_te2_adam_lr: number | null;
  muon_adam_config: Record<string, unknown> | null;
  rms_rescaling: boolean | null;
  normuon_variant: boolean;
  beta2_normuon: number | null;
  normuon_eps: number | null;
  low_rank_ortho: boolean;
  ortho_rank: number | null;
  accelerated_ns: boolean;
  cautious_wd: boolean;
  approx_mars: boolean;
  kappa_p: number | null;
  auto_kappa_p: boolean;
  compile: boolean;
}

export interface SampleConfig {
  enabled: boolean;
  prompt: string;
  negative_prompt: string;
  height: number;
  width: number;
  frames: number;
  length: number;
  seed: number;
  random_seed: boolean;
  diffusion_steps: number;
  cfg_scale: number;
  noise_scheduler: NoiseScheduler;
  text_encoder_1_layer_skip: number;
  text_encoder_1_sequence_length: number | null;
  text_encoder_2_layer_skip: number;
  text_encoder_2_sequence_length: number | null;
  text_encoder_3_layer_skip: number;
  text_encoder_4_layer_skip: number;
  transformer_attention_mask: boolean;
  force_last_timestep: boolean;
  sample_inpainting: boolean;
  base_image_path: string;
  mask_image_path: string;
}

export interface CloudSecretsConfig {
  api_key: string;
  id: string;
  host: string;
  port: string;
  user: string;
  key_file: string;
  password: string;
}

export interface SecretsConfig {
  huggingface_token: string;
  cloud: CloudSecretsConfig;
}

export interface TrainConfig {
  training_method: TrainingMethod;
  model_type: ModelType;
  debug_mode: boolean;
  debug_dir: string;
  workspace_dir: string;
  cache_dir: string;
  tensorboard: boolean;
  tensorboard_expose: boolean;
  tensorboard_always_on: boolean;
  tensorboard_port: number;
  validation: boolean;
  validate_after: number;
  validate_after_unit: TimeUnit;
  continue_last_backup: boolean;
  include_train_config: ConfigPart;
  multi_gpu: boolean;
  device_indexes: string;
  gradient_reduce_precision: GradientReducePrecision;
  fused_gradient_reduce: boolean;
  async_gradient_reduce: boolean;
  async_gradient_reduce_buffer: number;
  base_model_name: string;
  output_dtype: DataType;
  output_model_format: ModelFormat;
  output_model_destination: string;
  gradient_checkpointing: GradientCheckpointingMethod;
  enable_async_offloading: boolean;
  enable_activation_offloading: boolean;
  layer_offload_fraction: number;
  force_circular_padding: boolean;
  compile: boolean;
  concept_file_name: string;
  concepts: ConceptConfig[] | null;
  aspect_ratio_bucketing: boolean;
  latent_caching: boolean;
  clear_cache_before_training: boolean;
  learning_rate_scheduler: LearningRateScheduler;
  custom_learning_rate_scheduler: string | null;
  scheduler_params: Record<string, string>[] | null;
  learning_rate: number;
  learning_rate_warmup_steps: number;
  learning_rate_cycles: number;
  learning_rate_min_factor: number;
  epochs: number;
  batch_size: number;
  gradient_accumulation_steps: number;
  ema: EMAMode;
  ema_decay: number;
  ema_update_step_interval: number;
  dataloader_threads: number;
  train_device: string;
  temp_device: string;
  train_dtype: DataType;
  fallback_train_dtype: DataType;
  enable_autocast_cache: boolean;
  only_cache: boolean;
  resolution: string;
  frames: string;
  mse_strength: number;
  mae_strength: number;
  log_cosh_strength: number;
  huber_strength: number;
  huber_delta: number;
  vb_loss_strength: number;
  loss_weight_fn: LossWeight;
  loss_weight_strength: number;
  dropout_probability: number;
  loss_scaler: LossScaler;
  learning_rate_scaler: LearningRateScaler;
  clip_grad_norm: number | null;
  offset_noise_weight: number;
  generalized_offset_noise: boolean;
  perturbation_noise_weight: number;
  rescale_noise_scheduler_to_zero_terminal_snr: boolean;
  force_v_prediction: boolean;
  force_epsilon_prediction: boolean;
  min_noising_strength: number;
  max_noising_strength: number;
  timestep_distribution: TimestepDistribution;
  noising_weight: number;
  noising_bias: number;
  timestep_shift: number;
  dynamic_timestep_shifting: boolean;
  unet: TrainModelPartConfig;
  prior: TrainModelPartConfig;
  transformer: TrainModelPartConfig;
  quantization: QuantizationConfig;
  text_encoder: TrainModelPartConfig;
  text_encoder_layer_skip: number;
  text_encoder_sequence_length: number | null;
  text_encoder_2: TrainModelPartConfig;
  text_encoder_2_layer_skip: number;
  text_encoder_2_sequence_length: number | null;
  text_encoder_3: TrainModelPartConfig;
  text_encoder_3_layer_skip: number;
  text_encoder_4: TrainModelPartConfig;
  text_encoder_4_layer_skip: number;
  vae: TrainModelPartConfig;
  effnet_encoder: TrainModelPartConfig;
  decoder: TrainModelPartConfig;
  decoder_text_encoder: TrainModelPartConfig;
  decoder_vqgan: TrainModelPartConfig;
  masked_training: boolean;
  unmasked_probability: number;
  unmasked_weight: number;
  normalize_masked_area_loss: boolean;
  masked_prior_preservation_weight: number;
  custom_conditioning_image: boolean;
  layer_filter: string;
  layer_filter_preset: string;
  layer_filter_regex: boolean;
  embedding_learning_rate: number | null;
  preserve_embedding_norm: boolean;
  embedding: TrainEmbeddingConfig;
  additional_embeddings: TrainEmbeddingConfig[];
  embedding_weight_dtype: DataType;
  cloud: CloudConfig;
  peft_type: PeftType;
  lora_model_name: string;
  lora_rank: number;
  lora_alpha: number;
  lora_decompose: boolean;
  lora_decompose_norm_epsilon: boolean;
  lora_decompose_output_axis: boolean;
  lora_weight_dtype: DataType;
  bundle_additional_embeddings: boolean;
  oft_block_size: number;
  oft_coft: boolean;
  coft_eps: number;
  oft_block_share: boolean;
  optimizer: TrainOptimizerConfig;
  optimizer_defaults: Record<string, TrainOptimizerConfig>;
  sample_definition_file_name: string;
  samples: SampleConfig[] | null;
  sample_after: number;
  sample_after_unit: TimeUnit;
  sample_skip_first: number;
  sample_image_format: ImageFormat;
  sample_video_format: VideoFormat;
  sample_audio_format: AudioFormat;
  samples_to_tensorboard: boolean;
  non_ema_sampling: boolean;
  backup_after: number;
  backup_after_unit: TimeUnit;
  rolling_backup: boolean;
  rolling_backup_count: number;
  backup_before_save: boolean;
  save_every: number;
  save_every_unit: TimeUnit;
  save_skip_first: number;
  save_filename_prefix: string;
  secrets: SecretsConfig;
}
