@import "tailwindcss";

/* Dark mode via data-theme attribute */
@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

/* Design Tokens */
@theme {
  /* Primary (pink/purple) */
  --color-orchid-600: #C218E8;
  --color-violet-500: #8A4DFF;
  --color-plum-800: #4B0E5F;
  --color-indigo-700: #3A1F8C;
  --color-lavender-50: #F9F5FF;
  --color-ink-950: #120B17;

  /* Semantic */
  --color-success-500: #2DD4BF;
  --color-warning-500: #FBBF24;
  --color-error-500: #F87171;
  --color-info-500: #7C8CFF;

  /* Alpha variants */
  --color-orchid-600-alpha-04: color-mix(in srgb, var(--color-orchid-600) 4%, transparent);
  --color-orchid-600-alpha-06: color-mix(in srgb, var(--color-orchid-600) 6%, transparent);
  --color-orchid-600-alpha-12: color-mix(in srgb, var(--color-orchid-600) 12%, transparent);
  --color-orchid-600-alpha-15: color-mix(in srgb, var(--color-orchid-600) 15%, transparent);
  --color-orchid-600-alpha-20: color-mix(in srgb, var(--color-orchid-600) 20%, transparent);
  --color-orchid-600-alpha-25: color-mix(in srgb, var(--color-orchid-600) 25%, transparent);
  --color-orchid-600-alpha-30: color-mix(in srgb, var(--color-orchid-600) 30%, transparent);

  --color-violet-500-alpha-04: color-mix(in srgb, var(--color-violet-500) 4%, transparent);
  --color-violet-500-alpha-08: color-mix(in srgb, var(--color-violet-500) 8%, transparent);
  --color-violet-500-alpha-30: color-mix(in srgb, var(--color-violet-500) 30%, transparent);

  --color-success-500-alpha-06: color-mix(in srgb, var(--color-success-500) 6%, transparent);
  --color-success-500-alpha-08: color-mix(in srgb, var(--color-success-500) 8%, transparent);
  --color-success-500-alpha-15: color-mix(in srgb, var(--color-success-500) 15%, transparent);
  --color-success-500-alpha-20: color-mix(in srgb, var(--color-success-500) 20%, transparent);
  --color-success-500-alpha-30: color-mix(in srgb, var(--color-success-500) 30%, transparent);
  --color-success-500-alpha-40: color-mix(in srgb, var(--color-success-500) 40%, transparent);
  --color-success-500-alpha-50: color-mix(in srgb, var(--color-success-500) 50%, transparent);
  --color-success-500-alpha-60: color-mix(in srgb, var(--color-success-500) 60%, transparent);

  --color-error-500-alpha-08: color-mix(in srgb, var(--color-error-500) 8%, transparent);
  --color-error-500-alpha-12: color-mix(in srgb, var(--color-error-500) 12%, transparent);
  --color-error-500-alpha-15: color-mix(in srgb, var(--color-error-500) 15%, transparent);
  --color-error-500-alpha-20: color-mix(in srgb, var(--color-error-500) 20%, transparent);
  --color-error-500-alpha-40: color-mix(in srgb, var(--color-error-500) 40%, transparent);

  --color-warning-500-alpha-06: color-mix(in srgb, var(--color-warning-500) 6%, transparent);
  --color-warning-500-alpha-12: color-mix(in srgb, var(--color-warning-500) 12%, transparent);
  --color-warning-500-alpha-15: color-mix(in srgb, var(--color-warning-500) 15%, transparent);

  --color-plum-800-alpha-08: color-mix(in srgb, var(--color-plum-800) 8%, transparent);

  --color-indigo-700-alpha-06: color-mix(in srgb, var(--color-indigo-700) 6%, transparent);

  /* Theme-aware (light defaults, overridden in [data-theme="dark"]) */
  --color-surface: #F9F5FF;
  --color-surface-sunken: #F3EDF8;
  --color-surface-raised: #FFFFFF;
  --color-input-bg: #F3EDF8;
  --color-on-surface: #24172D;
  --color-on-surface-secondary: #6D5C7A;
  --color-border-subtle: rgba(0, 0, 0, 0.06);
  --color-border-focus: var(--color-orchid-600);
  --color-gradient-start: #C218E8;
  --color-gradient-end: #8A4DFF;
  --color-logo-gradient-start: #C218E8;
  --color-logo-gradient-end: #8A4DFF;

  /* Typography */
  --font-sans: "DM Sans", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  --font-mono: "JetBrains Mono", "SF Mono", "Roboto Mono", Consolas, monospace;
  --font-display: "Instrument Sans", "DM Sans", sans-serif;

  /* Type scale */
  --text-display: clamp(2.5rem, 5vw, 4.5rem);
  --text-h1: clamp(1.75rem, 3vw, 2.5rem);
  --text-h2: clamp(1.25rem, 2.5vw, 1.75rem);
  --text-h3: 1.25rem;
  --text-body: 1rem;
  --text-small: 0.875rem;
  --text-caption: 0.8125rem;
  --text-caption--line-height: 1.25rem;
  --text-micro: 0.75rem;
  --text-label: 0.6875rem;
  --text-label--line-height: 1rem;

  /* Border radius */
  --radius-sm: 8px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --radius-full: 9999px;

  /* Elevation */
  --shadow-1: 0 2px 8px rgba(18, 11, 23, 0.08), 0 1px 2px rgba(18, 11, 23, 0.06);
  --shadow-2: 0 4px 16px rgba(18, 11, 23, 0.12), 0 2px 4px rgba(18, 11, 23, 0.08);
  --shadow-3: 0 8px 24px rgba(18, 11, 23, 0.16), 0 4px 8px rgba(18, 11, 23, 0.10);
  --shadow-inset-focus: inset 0 0 0 1px var(--color-orchid-600), 0 0 0 3px var(--color-orchid-600-alpha-15);

  /* Content layout */
  --content-max-width: 1400px;
  --content-padding-x: 40px;
  --content-padding-y: 32px;

  /* Animations */
  --animate-shimmer: shimmer 1s linear infinite;
  --animate-row-fade: rowFade 0.2s ease-out;
  --animate-pulse-error: pulseError 2s infinite;
  --animate-tab-slide: tabSlide 250ms ease-out;

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  @keyframes rowFade {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }

  @keyframes pulseError {
    0%, 100% { text-shadow: 0 0 0 transparent; }
    50% { text-shadow: 0 0 6px var(--color-error-500); }
  }

  @keyframes tabSlide {
    from { transform: scaleX(0); opacity: 0; }
    to { transform: scaleX(1); opacity: 1; }
  }

  @keyframes sectionReveal {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  --animate-section-reveal: sectionReveal 300ms ease-out both;
  --animate-path-draw: pathDraw 250ms ease-out;
}

@keyframes pathDraw {
  from { stroke-dashoffset: 1; }
  to { stroke-dashoffset: 0; }
}

.icon-path-draw svg {
  stroke-dasharray: 1;
  stroke-dashoffset: 0;
  animation: var(--animate-path-draw);
}

/* Dark theme overrides */
[data-theme="dark"] {
  --color-surface: #120B17;
  --color-surface-sunken: #0D0811;
  --color-surface-raised: #1A1122;
  --color-input-bg: #16101E;
  --color-on-surface: #F7F0FF;
  --color-on-surface-secondary: #A6A0B5;
  --color-border-subtle: rgba(255, 255, 255, 0.08);
  --color-border-focus: var(--color-orchid-600);
  --color-gradient-start: #4B0E5F;
  --color-gradient-end: #3A1F8C;
  --color-logo-gradient-start: #C218E8;
  --color-logo-gradient-end: #8A4DFF;
  --shadow-1: 0 2px 8px rgba(0, 0, 0, 0.24), 0 1px 2px rgba(0, 0, 0, 0.16);
  --shadow-2: 0 4px 16px rgba(0, 0, 0, 0.32), 0 2px 4px rgba(0, 0, 0, 0.20);
  --shadow-3: 0 8px 24px rgba(0, 0, 0, 0.40), 0 4px 8px rgba(0, 0, 0, 0.24);
  color-scheme: dark;
}

/* Non-theme custom properties */
:root {
  --trans-base: 200ms ease-out;
  --spacing-unit: 8px;
}

/* Base styles */
body {
  font-family: var(--font-sans);
  background-color: var(--color-surface);
  color: var(--color-on-surface);
  margin: 0;
  padding: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color 800ms ease, color 800ms ease;
  color-scheme: light;
}

code, pre, .mono {
  font-family: var(--font-mono);
}

table, .tabular-nums {
  font-variant-numeric: tabular-nums;
}

/* Scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-border-subtle) transparent;
}

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-border-subtle);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-on-surface-secondary);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.10);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.20);
}

/* Glass morphism card */
.card {
  background: var(--color-surface-raised);
  backdrop-filter: blur(12px) saturate(110%);
  border: 1px solid var(--color-border-subtle);
  box-shadow: var(--shadow-1);
  border-radius: var(--radius-sm);
  transition: box-shadow var(--trans-base), transform var(--trans-base);
}

[data-theme="dark"] .card {
  background: rgba(26, 17, 34, 0.65);
  border-color: rgba(255, 255, 255, 0.06);
}

.card:hover {
  box-shadow: var(--shadow-2);
  transform: translateY(-2px);
}

.card.card-static:hover {
  transform: none;
  box-shadow: var(--shadow-1);
}

/* Focus rings (twin-gradient for accessibility) */
*:focus-visible {
  outline: 3px solid transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--color-orchid-600), 0 0 0 4px var(--color-violet-500);
}

/* Gradient accent */
.gradient-accent {
  background: linear-gradient(135deg, var(--color-gradient-start), var(--color-gradient-end));
}

/* Skeleton shimmer */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-border-subtle) 25%,
    rgba(255, 255, 255, 0.05) 50%,
    var(--color-border-subtle) 75%
  );
  background-size: 200% 100%;
  animation: var(--animate-shimmer);
  border-radius: var(--radius-sm);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode */
@media (prefers-contrast: more) {
  :root {
    --color-orchid-600: #C218E8;
    --color-violet-500: #8A4DFF;
    --color-border-subtle: #888;
    --color-on-surface-secondary: #555;
  }

  [data-theme="dark"] {
    --color-border-subtle: #999;
    --color-on-surface-secondary: #ccc;
  }

  .card, .card-static {
    border-width: 2px;
  }

  .tab-button.active::after {
    background: var(--color-orchid-600) !important;
  }
  .top-bar-title {
    background: none !important;
    -webkit-background-clip: unset !important;
    background-clip: unset !important;
    -webkit-text-fill-color: var(--color-orchid-600) !important;
    color: var(--color-orchid-600) !important;
  }
  .action-button {
    background: var(--color-orchid-600) !important;
  }
}
